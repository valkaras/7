<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글읽기</title>
    <script type = "text/javascript" src="./struct.js"></script>
    <script>

        var dcnt = 0
        var dkey = 0

        document.addEventListener( 'DOMContentLoaded', () => {
            const title = document.querySelector('#title')
            const author = document.querySelector('#author')
            const text = document.querySelector('#text')
            const submit = document.querySelector('#submit')


            submit.addEventListener( 'click' , () => {
            // 가져오기

            // json 형식에서 변환해야 한다

            let val = JSON.parse( window.localStorage.getItem( dcnt )) // 숫자로 해도 저장됨 키값은 게시물 숫자
            console.log(val)
            let prt = val.txt
            console.log(prt)



                // console.log(title.value)
                // console.log(typeof title.value)
                // console.log(text.value)
                // console.log(typeof text.value)
                dcnt += 1
                // console.log(dcnt)

                let today = new Date()
                let day = today.getFullYear() + '.' + today.getMonth() + '.' + today.getDay() + '.' 
            let article = new Article( dcnt, title.value, author.value, text.value, day, refcount )

                // console.log(day)
                // console.log(typeof day)

                let article = new Article( dcnt, title.value, author.value, text.value, day, refcount ) // day 추가예정
            delete.addEventListener( 'click' , () => {

                console.log(article.ttl)
                console.log(article.txt)

                // cur 키와 값을 지우고 
                localStorage.removeItem()

                localStorage.setItem( dcnt , JSON.stringify( article ) ) // dnum 키값 문자열 or 숫자로

                let val = JSON.parse( window.localStorage.getItem( dcnt )) // 숫자로 해도 저장됨 키값은 게시물 숫자
                console.log(val)
                let prt = val.txt
                console.log(prt)



                // 임시저장 기능은 활성화하지 않음
                // 미리보기 기능을 제공해야 한다. watch 파일과 같다.
                // watch 파일에 수정기능을 선택하면 다시 넘어오도록 한다.

                // 
                location.href= './watch.html';
                location.href= './main.html';
              }) // end submit

        }) // end DOM Content Loaded
    </script>
</head>
<body>
    <h1>글작성</h1>

    <div> <a href="./main.html"> 글목록으로 </a></div>
    <div>제목 </br>
        <input id="title" type="text" /></div>
        <div id="title"></div> </div>

        <div>작성자 </br>
            <input id="author" type="text" /></div>
            <div id="author"></div> </div>

    <div>내용 </br>
        <textarea id="text" name="내용" id="" cols="30" rows="10"></textarea>
        <div id="text"></div>
    </div>

    <button id="submit">확인</button> </br>
    <button id="submit">확인</button> <button id="submit">삭제</button> </br>
</body>
</html>